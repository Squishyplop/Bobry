{% extends "base.html" %}
{% block content %}
<h2>Panel admina</h2>

<form method="get">
  <input name="q" placeholder="Szukaj użytkownika" value="{{ query }}">
  <button type="submit">Szukaj</button>
</form>

<hr>

<table border="1" cellpadding="5">
  <tr>
    <th>Użytkownik</th>
    <th>Ranga</th>
    <th>Zmień rangę</th>
  </tr>

  {% for p in profiles %}
  <tr>
    <td>{{ p.user.username }}</td>
    <td>{{ p.get_ranga_display }}</td>
    <td>
      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="profile_id" value="{{ p.id }}">
        <select name="ranga">
          {% for key, label in rangi %}
            <option value="{{ key }}" {% if key == p.ranga %}selected{% endif %}>
              {{ label }}
            </option>
          {% endfor %}
        </select>
        <button type="submit">Zapisz</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
